<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/4194463c7d.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="../../reset.css">
    <style>
        h3 {
            font-size: 32px;
        }

        #b button {
            font-size: 26px;
            background-color: transparent;
            padding: 10px;
            border-radius: .25em;
            margin: 0 10px 10px 0;
        }

        div {
            padding: 10px;
        }

        .chooseedValue {
            background-color: #f00;
        }
    </style>


    <title>Hello, Apple~</title>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-dark">
        <div class="container">
            <button class="navbar-toggler bg-light" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <a class="navbar-brand m-auto text-white" href="#">Apple</a>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav m-auto">
                    <li class="nav-item m-auto">
                        <a class="nav-link active text-white " aria-current="page" href="#">商店</a>
                    </li>
                    <li class="nav-item m-auto">
                        <a class="nav-link text-white" href="#">MAC</a>
                    </li>
                    <li class="nav-item m-auto">
                        <a class="nav-link text-white" href="#">iPad</a>
                    </li>
                    <li class="nav-item m-auto">
                        <a class="nav-link text-white" href="#">iPadmini</a>
                    </li>
                    <li class="nav-item m-auto">
                        <a class="nav-link text-white" href="#">Watch</a>
                    </li>
                    <li class="nav-item m-auto">
                        <a class="nav-link text-white" href="#">AirPods</a>
                    </li>
                    <li class="nav-item m-auto">
                        <a class="nav-link text-white" href="#">TV 和家庭</a>
                    </li>
                    <li class="nav-item m-auto">
                        <a class="nav-link text-white" href="#">Apple 獨家</a>
                    </li>
                    <li class="nav-item m-auto">
                        <a class="nav-link text-white" href="#">配件</a>
                    </li>
                    <li class="nav-item m-auto">
                        <a class="nav-link text-white" href="#">支援服務</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="container botton m-auto d-flex justify-content-center">
        <div class="btn-group" role="group" aria-label="Basic checkbox toggle button group">
            <input type="checkbox" class="btn-check" id="iPadAir" autocomplete="off">
            <label class="btn btn-outline-primary" for="btncheck1">iPadAir</label>

            <input type="checkbox" class="btn-check" id="iPad" autocomplete="off">
            <label class="btn btn-outline-primary" for="btncheck2">iPad</label>

            <input type="checkbox" class="btn-check" id="iPadmini" autocomplete="off">
            <label class="btn btn-outline-primary" for="btncheck3">iPadmini</label>
        </div>
    </div>

    <div class="container m-auto ">
        <div class="row py-5 align-items-md-center">
            <div class="col-6 col-md-6 mw-100">
                <img src="./圖片/iPadAirall.jpg" class="allpic mw-100" alt="">
            </div>
            <div class="col-6 col-md-6 mw-100 " id="b">

            </div>
            <div class="money"></div>
            <!-- <div class="col-12 col-md-6 mw-100">
                <img src="./圖片/LINE_ALBUM_IPAD_PIC_220502_19.jpg" class="mw-20" class="mw-100" alt="">
                <img src="./圖片/LINE_ALBUM_IPAD_PIC_220502_2.jpg" class="mw-20" class="mw-100" alt="">
                <img src="./圖片/LINE_ALBUM_IPAD_PIC_220502_1.jpg" class="mw-20" class="mw-100" alt="">
                <img src="./圖片/LINE_ALBUM_IPAD_PIC_220502_20.jpg" class="mw-20" class="mw-100" alt="">
                <img src="./圖片/LINE_ALBUM_IPAD_PIC_220502_21.jpg" class="mw-20" class="mw-100" alt="">
            </div> -->
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>

    <script>
        const url = "https://raw.githubusercontent.com/LittleY11/FileStorage/main/iPadAir2020_Data.json";

        //資料
        let iPadArray
        let colors = [],
            storages = [],
            networks = []

        let pic = ["./圖片/gray.jpg", "./圖片/pink.jpg", "./圖片/purple.jpg", "./圖片/blue.jpg", "./圖片/starlight.jpg"]
        // let allpic = document.querySelector('.allpic')
        let allpic = ["./圖片/graycolor.jpg","./圖片/pinkcolor.jpg","./圖片/purplecolor.jpg","./圖片/bluecolor.jpg","./圖片/starlightcolor.jpg"]

        let img = document.createElement('img')





        //UI 靜態有的寫在此!
        let iPadAir = document.querySelector("#iPadAir");

        let b = document.querySelector("#b");
        let money = document.querySelector(".money")


        window.onload = function () {

            iPadAir.addEventListener("click", iPadAir);
            requestJSON1()

            // color.addEventListener("click", colors);
            // requestJSON2()
        }

        function requestJSON1() {
            let xhr = new XMLHttpRequest();
            xhr.onload = function () {
                //
                console.log(this.responseText)
                iPadArray = JSON.parse(this.responseText)
                // after()
                makeData()
                makeDOM()
            }
            xhr.open("GET", url)
            xhr.send()
        }

        let chooseedValue = {
            color: null,
            storage: null,
            network: null
        }
        //color陣列存放不同的顏色
        // 顏色5 記憶體容量2種 網路2 
        // 整理資料: 選項
        function makeData() {
            //要去迭代iPadArray裡面的資料
            iPadArray.forEach((data) => {
                // 不重複的收集 
                // 檢查colors是否包含此(data)顏色 若沒有則放進去 有則跳過
                // if ( colors.includes(data.color) == false )
                if (!colors.includes(data.color))
                    colors.push(data.color)
                if (!storages.includes(data.storage))
                    storages.push(data.storage)
                if (!networks.includes(data.network))
                    networks.push(data.network)
            })
            // 檢查收集好的陣列
            console.log(colors, storages, networks)
        }

        // b >
        // div > h3{顏色} + button{color}*n
        // div > h3{記憶體} + button{storage}*n
        // div > h3{網路} + button{network}*n
        // 製作選項按鈕

        function makeDOM() {
            makeSpec('顏色', colors, 'color')
            makeSpec('記憶體', storages, 'storage')
            makeSpec('網路', networks, 'network')

            function makeSpec(title, array, key) {
                let div = document.createElement('div')
                let allcolor = document.createElement('allcolor')
                div.setAttribute('class', allcolor)
                b.append(div)



                let h3 = document.createElement('h3')
                div.append(h3)
                h3.innerText = title


                // 迭代裡面的每個東西 item參數
                // 每個顏色 創一個按鈕>接上去>設定>
                array.forEach((value, index) => {
                    let button = document.createElement("button")
                    div.append(button)
                    button.innerText = `${value}`

                    // 點擊後 改變自己那一組 選到誰的變數
                    //拿各組選到的值 去篩選 (記錄選到誰的是全域變數 EASY)
                    button.addEventListener("click", function () {
                        chooseedValue[key] = value
                        console.log(chooseedValue)
                        if (key == 'color') {
                            // 存放路徑
                            allpic.src = pic[index]
                            allpic.src = allpic[index]

                        }
                        console.log(pic)
                        allpic.innerText = ""
                        changeImgMoney()
                    })
                })
                div.append(document.createElement('hr'))
            }
        }

        function changeImgMoney() {

            let result = iPadArray.filter(data =>
                data.color == chooseedValue.color &&
                data.storage == chooseedValue.storage &&
                data.network == chooseedValue.network

            )
            console.log(result)
            //找個變數接起來
            //防呆 檢查沒過關  跳過
            if (result.length != 1) return
            //迭帶出 那一筆  的價錢
            money.innerText = result[0].price
        }





    </script>
</body>

</html>